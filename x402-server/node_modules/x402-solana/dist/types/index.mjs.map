{"version":3,"sources":["../../src/types/x402-protocol.ts","../../src/types/solana-payment.ts"],"names":[],"mappings":";;;;;AASO,IAAM,mBAAA,GAAsB,EAAE,IAAA,CAAK;AAAA,EACxC,eAAA;AAAA,EACA;AACF,CAAC;AAKM,IAAM,0BAAA,GAA6B,EAAE,MAAA,CAAO;AAAA,EACjD,WAAA,EAAa,CAAA,CAAE,OAAA,CAAQ,CAAC,CAAA;AAAA,EACxB,MAAA,EAAQ,CAAA,CAAE,OAAA,CAAQ,OAAO,CAAA;AAAA,EACzB,OAAA,EAAS,mBAAA;AAAA,EACT,OAAA,EAAS;AAAA;AACX,CAAC;;;ACiDM,SAAS,gBAAgB,OAAA,EAAwD;AACtF,EAAA,OAAO,OAAA,KAAY,YAAY,OAAA,KAAY,eAAA;AAC7C","file":"index.mjs","sourcesContent":["import { z } from \"zod\";\nimport { ExactSvmPayloadSchema } from \"x402/types\";\n\n/**\n * Solana-specific x402 Protocol Types\n * These are Solana-only variants of x402 protocol types\n */\n\n// Solana-only network enum\nexport const SolanaNetworkSchema = z.enum([\n  \"solana-devnet\",\n  \"solana\"\n]);\n\nexport type SolanaNetwork = z.infer<typeof SolanaNetworkSchema>;\n\n// Solana-specific payment payload schema\nexport const SolanaPaymentPayloadSchema = z.object({\n  x402Version: z.literal(1),\n  scheme: z.literal(\"exact\"),\n  network: SolanaNetworkSchema,\n  payload: ExactSvmPayloadSchema, // Official SVM payload from x402\n});\n\nexport type SolanaPaymentPayload = z.infer<typeof SolanaPaymentPayloadSchema>;\n\n","import { VersionedTransaction } from \"@solana/web3.js\";\nimport { SolanaNetwork } from \"./x402-protocol\";\nimport type { PaymentMiddlewareConfig, SPLTokenAmount, RouteConfig } from \"x402/types\";\n\n/**\n * Solana-specific payment types\n */\n\n// Re-export x402 types\nexport type { PaymentMiddlewareConfig, SPLTokenAmount, RouteConfig };\n\n// Wallet adapter interface - framework agnostic\n// Compatible with both Anza wallet-adapter and custom implementations\nexport interface WalletAdapter {\n  publicKey?: { toString(): string }; // Anza wallet-adapter standard\n  address?: string; // Alternative property\n  signTransaction: (tx: VersionedTransaction) => Promise<VersionedTransaction>;\n}\n\n// Client configuration\nexport interface X402ClientConfig {\n  wallet: WalletAdapter;\n  network: SolanaNetwork;\n  rpcUrl?: string;\n  maxPaymentAmount?: bigint;\n  /**\n   * Optional custom fetch function for making HTTP requests.\n   * Useful for routing requests through a proxy server to avoid CORS issues\n   * or adding custom request/response handling.\n   *\n   * @default globalThis.fetch\n   *\n   * @example\n   * ```typescript\n   * // Using a proxy to bypass CORS\n   * const proxyFetch = async (url, init) => {\n   *   const proxyUrl = 'https://your-proxy.com/proxy';\n   *   return fetch(proxyUrl, {\n   *     method: 'POST',\n   *     headers: { 'Content-Type': 'application/json' },\n   *     body: JSON.stringify({ url, method: init?.method, headers: init?.headers, body: init?.body })\n   *   }).then(async (res) => {\n   *     const proxyData = await res.json();\n   *     return new Response(\n   *       typeof proxyData.data === 'string' ? proxyData.data : JSON.stringify(proxyData.data),\n   *       { status: proxyData.status, statusText: proxyData.statusText, headers: new Headers(proxyData.headers) }\n   *     );\n   *   });\n   * };\n   *\n   * const client = createX402Client({\n   *   wallet,\n   *   network: 'solana-devnet',\n   *   customFetch: proxyFetch\n   * });\n   * ```\n   */\n  customFetch?: typeof fetch;\n}\n\n// Server configuration - aligns with x402 RouteConfig pattern\nexport interface X402ServerConfig {\n  network: SolanaNetwork;\n  treasuryAddress: string; // Where payments are sent (payTo)\n  facilitatorUrl: string;\n  rpcUrl?: string;\n  defaultToken?: SPLTokenAmount['asset']; // Default token to accept (defaults to USDC)\n  middlewareConfig?: PaymentMiddlewareConfig; // Default middleware config\n}\n\n// Helper function to check if a network is Solana-based\nexport function isSolanaNetwork(network: string): network is \"solana\" | \"solana-devnet\" {\n  return network === \"solana\" || network === \"solana-devnet\";\n}\n\n"]}